<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema#">
<head>
  <link rel="profile" href="http://www.w3.org/1999/xhtml/vocab" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../sites/all/themes/bootstrap/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="shortlink" href="chef-community-cookbook-issues.html" />
<link rel="canonical" href="chef-community-cookbook-issues.html" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
  <title>Chef: Community Cookbook Issues | Home</title>
  <link type="text/css" rel="stylesheet" href="../sites/default/files/css/css_lQaZfjVpwP_oGNqdtWCSpJT1EMqXdMiU84ekLLxQnc4.css" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/default/files/css/css_YmuMqUm--85MDg6GF8xFt60xnxOSYeKArfr5yk0-sVc.css" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/default/files/css/css_MnXiytJtb186Ydycnpwpw34cuUsHaKc80ey5LiQXhSY.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://cdn.jsdelivr.net/bootstrap/3.0.2/css/bootstrap.min.css" media="all" />
<link type="text/css" rel="stylesheet" href="../sites/default/files/css/css_cRAVao--tsiCNYD0CCFUWT7kPl_o4FDNgRF_jEC9PdQ.css" media="all" />
  <!-- HTML5 element support for IE6-8 -->
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="../sites/default/files/js/js_oCVMDTeSNt-_QxknevWyf6yO5OzmME3AhRz3ggZgNtg.js"></script>
<script src="http://cdn.jsdelivr.net/bootstrap/3.0.2/js/bootstrap.min.js"></script>
<script src="../sites/default/files/js/js_I8yX6RYPZb7AtMcDUA3QKDZqVkvEn35ED11_1i7vVpc.js"></script>
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create", "UA-52870008-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"bootstrap","theme_token":"F00eX1MLfqAtwkDdzs0kbrFSifFp6fSlrEqNXO01FIs","js":{"sites\/all\/themes\/bootstrap\/js\/bootstrap.js":1,"sites\/all\/modules\/jquery_update\/replace\/jquery\/1.10\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"\/\/cdn.jsdelivr.net\/bootstrap\/3.0.2\/js\/bootstrap.min.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1},"css":{"modules\/system\/system.base.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ckeditor\/css\/ckeditor.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"\/\/cdn.jsdelivr.net\/bootstrap\/3.0.2\/css\/bootstrap.min.css":1,"sites\/all\/themes\/bootstrap\/css\/3.0.2\/overrides.min.css":1}},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"anchorsFix":1,"anchorsSmoothScrolling":1,"formHasError":1,"popoverEnabled":1,"popoverOptions":{"animation":1,"html":0,"placement":"right","selector":"","trigger":"click","triggerAutoclose":1,"title":"","content":"","delay":0,"container":"body"},"tooltipEnabled":1,"tooltipOptions":{"animation":1,"html":0,"placement":"auto left","selector":"","trigger":"hover focus","delay":0,"container":"body"}}});</script>
</head>
<body role="document" class="html not-front not-logged-in one-sidebar sidebar-first page-node page-node- page-node-7 node-type-jeff-on-ops-blog-article">
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <header id="navbar" role="banner" class="navbar container navbar-default">
  <div class="container">
    <div class="navbar-header">
              <a class="logo navbar-btn pull-left" href="../index.html" title="Home">
          <img src="../sites/all/themes/bootstrap/logo.png" alt="Home" />
        </a>
      
              <a class="name navbar-brand" href="../index.html" title="Home">Home</a>
      
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          </div>

          <div class="navbar-collapse collapse">
        <nav role="navigation">
                      <ul class="menu nav navbar-nav"><li class="first leaf"><a href="../jeff-on-ops-blog.html" title="">Jeff on Ops Blog</a></li>
<li class="leaf"><a href="http://appwriter.com" title="">Pete on Dev Blog</a></li>
<li class="last expanded dropdown"><a href="wins-and-losses.html" data-target="#" class="dropdown-toggle" data-toggle="dropdown">Wins Losses <span class="caret"></span></a><ul class="dropdown-menu"><li class="first leaf"><a href="wins-and-losses.html" title="">Summary: Wins and Losses</a></li>
<li class="leaf"><a href="case-study-advanced-code-generation-and-tooling-very-large-teams.html">Case Study: Advanced Code Generation and Tooling for very large teams</a></li>
<li class="leaf"><a href="case-study-beyond-staff-augmentation-frameworks-and-automation.html">Case Study: Beyond staff augmentation - Frameworks and Automation</a></li>
<li class="leaf"><a href="case-study-big-data-etl.html">Case Study: Big Data ETL</a></li>
<li class="leaf"><a href="case-study-big-data-etl-automation.html">Case Study: Big Data ETL Automation</a></li>
<li class="leaf"><a href="case-study-converting-prototype-code-base-production-code-base.html">Case Study: Converting a Prototype Code Base Into a Production Code Base</a></li>
<li class="leaf"><a href="case-study-eating-our-own-devops-dog-food.html">Case Study: Eating Our Own Devops Dog Food</a></li>
<li class="leaf"><a href="case-study-eclipse-based-structured-notes-app.html">Case Study: Eclipse Based Structured Notes App</a></li>
<li class="leaf"><a href="case-study-how-improve-performance-already-brilliant-team.html">Case Study: How to Improve the Performance of An Already Brilliant Team</a></li>
<li class="leaf"><a href="case-study-modular-java-workspace-administration.html">Case Study: Modular Java Workspace Administration</a></li>
<li class="leaf"><a href="case-study-new-technologies-established-department.html">Case Study: New Technologies in an Established Department</a></li>
<li class="leaf"><a href="case-study-rapid-development-custom-mission-critical-software.html">Case Study: Rapid Development of Custom, Mission Critical Software</a></li>
<li class="leaf"><a href="case-study-setting-junior-programmer-finished-app-administer-and-maintain.html">Case Study: Setting up a junior programmer with a finished app to administer and maintain</a></li>
<li class="leaf"><a href="case-study-starting-scratch.html">Case Study: Starting from Scratch!</a></li>
<li class="leaf"><a href="case-study-webappwriter-helps-thousand-generate-custom-applications.html">Case Study: WebAppWriter helps thousand generate custom applications</a></li>
<li class="last leaf"><a href="natural-limitations.html">Natural Limitations</a></li>
</ul></li>
</ul>                                      </nav>
      </div>
      </div>
</header>

<div class="main-container container">

  <header role="banner" id="page-header">
    
      <div class="region region-header">
    <section id="block-block-1" class="block block-block clearfix">

      
  <p><img alt="" src="http://a.btrg.org/00datafundamentals.com/datafundamentals250simplici.gif" style="height:42px; width:250px" /><img alt="" src="http://a.btrg.org/df2015/whiteBanner.jpg" style="height:42px; width:43px" /><a href="../dev-offerings.html"><img alt="" src="http://a.btrg.org/df2015/peteBanner.jpg" /></a><a href="../ops-offerings.html"><img alt="" src="http://a.btrg.org/df2015/opsJeffBanner.jpg" /></a><a href="../df.lab.html"><img alt="" src="http://a.btrg.org/df2015/scienceBanner.jpg" /></a><a href="../unicorn-gap.html"><img alt="" src="http://a.btrg.org/df2015/unicornGapBanner.jpg" style="border-style:solid; border-width:0px" /></a></p>

</section>
  </div>
  </header> <!-- /#page-header -->

  <div class="row">

          <aside class="col-sm-3" role="complementary">
          <div class="region region-sidebar-first well">
    <section id="block-system-navigation" class="block block-system block-menu clearfix">

        <h2 class="block-title">Contents</h2>
    
  <ul class="menu nav"><li class="first leaf"><a href="../jeff-on-ops-blog.html" title="">Jeff on Ops Blog</a></li>
<li class="last leaf"><a href="wins-and-losses.html" title="">Wins and Losses</a></li>
</ul>
</section>
  </div>
      </aside>  <!-- /#sidebar-first -->
    
    <section class="col-sm-9">
                  <a id="main-content"></a>
                    <h1 class="page-header">Chef: Community Cookbook Issues</h1>
                                                        <article id="node-7" class="node node-jeff-on-ops-blog-article clearfix" about="/content/chef-community-cookbook-issues" typeof="sioc:Item foaf:Document">
    <header>
            <span property="dc:title" content="Chef: Community Cookbook Issues" class="rdf-meta element-hidden"></span>        <span class="submitted">
        <div class="user-picture">
    <img typeof="foaf:Image" class="img-responsive" src="../sites/default/files/styles/thumbnail/public/pictures/picture-11-1400705926-itok=KFQI6U-7.jpg" alt="Jeff Carapetyan&#039;s picture" title="Jeff Carapetyan&#039;s picture" />  </div>
      <span property="dc:date dc:created" content="2014-04-15T16:39:11-05:00" datatype="xsd:dateTime" rel="sioc:has_creator">Submitted by <span class="username" xml:lang="" about="/users/jeff-carapetyan" typeof="sioc:UserAccount" property="foaf:name" datatype="">Jeff Carapetyan</span> on Tue, 04/15/2014 - 16:39</span>    </span>
      </header>
    <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><pre>
<em><span style="font-size:9px">This blog is one of a series of blogs on the challenges of learning Chef, ops, and the technical world of IT all in one motion. Jeff Carapetyan is an Ops consultant concentrating on basic Chef work, and is available for contracts in the Austin area.</span></em></pre><h3>I probably shouldn't be starting this.</h3>
<p>What I am about to introduce is a <strong><em>controversial topic</em></strong>. If given only the prompt "community cookbooks", a room full of Chef users would be able to talk for several hours on the best approaches, stating their opinions on how things should be run.</p>
<p>For me, where I stand is that <strong><em>community cookbooks are not for me</em></strong>, or not as they currently exist. This position is not where I started out.</p>
<p>Others may say that they are excellent and an integral part of their workflow. And I don't want to disagree with them as it clearly works for them, just not for me. However, I think that everybody can agree on a couple of issues that do pop up when using them.</p>
<h3>Credits</h3>
<p>Much of the thinking that went into this article came from extended conversations involving <a href="http://www.meetup.com/Austin-DevOps/events/77688572/">Matt Ray</a> at our local Austin Chef Meetup.</p>
<p>Other clarity on this thinking came from <a href="https://www.youtube.com/watch?v=vVsSAKtgOYs">this great talk</a> by Noah Kantrowitz.</p>
<h3>Cookbooks are highly opinionated in their design</h3>
<p>Those who are new to Chef probably won't understand the distinction of a library vs. application vs. wrapper cookbook (and some experienced people who don't either. Go <a href="http://blog.vialstudios.com/the-environment-cookbook-pattern/">here</a> for a better understanding), but anybody with about 10 minutes of Chef experience will tell you that no two cookbooks are written alike.</p>
<p>There are so many options in fact, that it gets tough at first to grasp how you should be writing and debugging a cookbook. None of this matters unless you write a cookbook for everyone. Which means, by definition, that almost everyone would have written it a different way than it got written.</p>
<h3>A Case of Over-reach</h3>
<p>In the defense of the cookbooks, it really isn't their fault that they got this way. The goal of a community cookbook is to have one cookbook that does everything you could ever want to do for an application or service. The problem is the degree of difficulty in accomplishing such a thing. What starts as a simple cookbook for one OS very quickly becomes a hydra with every special use-case and OS version that you have to account for. In doing so you have add attribute values and libraries and write custom ruby code well beyond the scope of normal chef, and it makes things far more difficult to understand. This is a problem that has gone away over time, but is one that may appear as the most offensive and egregious.</p>
<p>Noah Kantrowitz does a fantastic job of defining the challenges of reusable cookbooks in <a href="https://www.youtube.com/watch?v=vVsSAKtgOYs">this great talk</a>. The two biggest takeaways I find in this talk are</p>
<ol><li>A good re-usable cookbook is not twice as much work, it is 10 times as much work</li>
<li>Good cookbook design is like good code design - it takes a lot of discipline, art, and sticking to well worn patterns.</li>
</ol><h3>They still require you to know a lot about the stuff you are installing.</h3>
<p>I know how bad this sounds, but it is an important point. The downside to all these configurable options on version numbers and types and configuration options is that you have to know which ones to tweak to get your version. The "default" settings that come with the cookbook might be dramatically different than what you need. Therefore, you have to know the difference between the two and how to get everything running. For senior level people who are looking for an easy way to set up an nginx server like they have 1000 times before this isn't a big deal, but it still remains a barrier to entry for the entry level people. </p>
<p>For example, if there are 8 key attribute to configure properly, and 2 of these 8 must be changed in tandem with each other, how would the random user even know that?</p>
<h3>There are robust cookbooks, but there isn't a way to tell which is which is which</h3>
<p>Matt Ray comes right out and says it. "Maybe [6?] community cookbooks are really great cookbooks that anyone could and should use. The rest....nah" He then enumerates the ones that fits this rare category. My experience has validated his comments as being correct.</p>
<p>Matt also prescribes the required solution: Namespacing and versioning. If you only have one hadoop cookbook no one is going to be happy. But if they are namespaced and versioned then there's a better chance that multiples can exist, one of which might fit your use case.</p>
<p>Matt also speaks of an antipattern - the rating system. A 1-5 rating on a generic hadoop cookbook might be meaningless: Two hadoop cookbooks written for different purposes could both be 5 rated, but only for their intended purpose. Using the other 5 rated cookbook for the wrong use case would make it a 1 for that use case.</p>
<p>Because of these challenges, the rating system to tell if a cookbook is good or not is almost entirely ignored, and so people usually just go with the most downloaded cookbook of that type. That type of thinking may be ignoring a cookbook which is way better written and easier as well.</p>
<h3>Sometimes, they don't even work right </h3>
<p>One thing that I found out quickly was that not all community cookbooks are readily maintained after being created. Someone who reserved the namespace may have written one version and then utterly forgotten about it, making it obsolete and useless. And don't think because it is readily maintained that it is bug free. I have had more than my fair share of issues with some cookbooks not installing properly on a new version (again, looking at you Java). </p>
<h3>The Future</h3>
<p>There are a few things coming on the horizon that are making community cookbooks look more promising, but nothing released currently. The first is the introduction of Chef-supermarket, which will address a couple of the major issues.</p>
<p>The second is that people are realizing community cookbooks are too complicated, they are doing what they  can to simplify them properly.</p>
<p>Bottom line, this is an area which can only get better from here. I'm hoping for great things.</p>
<h3>Here Is What I Do:</h3>
<ul><li>I write my own cookbooks. Seems crazy to re-write what others have already done, but my cookbooks are really small and for a very specific use case. Listen at the conferences and you will find that this is very common advice.</li>
<li>I always steal ideas and insights from community cookbooks. This is where they really shine. Great stuff.</li>
<li>I'm super into testing and versioning and modularizing my cookbooks. Like the <a href="http://en.wikipedia.org/wiki/Unix_philosophy">well worn Unix Philosophy "Only do one thing and do it well"</a>.</li>
</ul><p>You can see the cookbooks we use here for our internal demos at our <a href="https://github.com/datafundamentals">github site</a>.</p>
</div></div></div>    <footer>
          </footer>
    </article>
    </section>

    
  </div>
</div>

  <footer class="footer container">
      <div class="region region-footer">
    <section id="block-block-2" class="block block-block clearfix">

      
  <p>We are technical guys, not copywriters or designers. <span style="color:#FF0000"><em><strong>Please feel free to offer any feeback we need re: this site!</strong></em>  </span>It might make a big difference. And <em>Thanks!</em></p>
<hr /><p class="rtecenter"><a href="mailto:jeff@datafundamentals.com">jeff@datafundamentals.com</a>         @devopsjeff       <a href="mailto:pete@datafundamentals.com">pete@datafundamentals.com</a>      @appwritercom</p>
<hr /><p class="rtecenter">Copyright 2014, 2015 - dataFundamentals</p>

</section>
  </div>
  </footer>
  <script src="../sites/default/files/js/js_L50O_PWoAuMOxVjnzZCkNSSmI0kFwhZsO1_KS8WnGKw.js"></script>
</body>
</html>
